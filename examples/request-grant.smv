MODULE main

VAR
  req     : boolean;           -- environment input
  state   : {IDLE, BUSY};      -- controller state

DEFINE
  grant := (state = IDLE) & req;
  busy  := (state = BUSY);

ASSIGN
  -- Initial state
  init(state)   := IDLE;

  -- Controller state machine
  next(state) :=
    case
      state = IDLE & req : BUSY;
      state = BUSY      : IDLE;
      TRUE              : IDLE;
    esac;
